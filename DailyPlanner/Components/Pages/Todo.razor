@page "/todo"
@using DailyPlanner
@rendermode InteractiveServer

<h3>Todo (@todos.Count(todo => !todo.IsDone))</h3>

<div class="new-todo-container">
    <input @bind="newTodo" placeholder="Enter a new task..." />
    <button @onclick="AddTodo" class="btn btn-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" stroke="white" class="bi bi-check2" viewBox="0 0 16 16">
            <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
        </svg>
    </button>
</div>

<ul style="list-style-type: none;">
    @foreach (var todo in todos)
    {
        <li>
            <TaskItem @bind-Title="@todo.Title" @bind-IsDone="@todo.IsDone" OnDelete="() => DeleteTodo(todo)" />
            @* <input @bind="todo.Title" /> *@
        </li>
    }
</ul>

@code {
    private List<TodoItem> todos = new();
    private string newTodo = "";

    private void AddTodo()
    {
        if (!string.IsNullOrWhiteSpace(newTodo))
        {
            todos.Add(new TodoItem { Title = newTodo });
            newTodo = string.Empty;
        }
    }

    private void DeleteTodo(TodoItem todo)
    {
        todos.Remove(todo);
    }
}